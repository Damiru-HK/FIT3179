{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 500,
    "title": {
        "text": "2024 T20 World Cup: Average first inning score by venue",
        "fontSize": 18
    },

    "params": [
        {
            "name": "innings_select",
            "value": "Average First Innings",
            "bind": {
                "input": "select",
                "options": ["Average First Innings", "Average Second Innings"],
                "labels": ["First Innings", "Second Innings"],
                "name": "Select Innings"
            }
        }
    ],

    "projection": {
        "type": "naturalEarth1",
        "center": [-80, 25],
        "scale": 700
    },

    "layer": [
        {
            "data": {
                "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/ne_110m_admin_0_countries.topojson",
                "format": {
                    "type": "topojson",
                    "feature": "ne_110m_admin_0_countries"
                }
            },

            "mark": {
                "type": "geoshape",
                "fill": "#e8e8e8",
                "stroke": "white"
            }
        },

        {
            "data": {
                "url": "https://raw.githubusercontent.com/Damiru-HK/FIT3179/refs/heads/main/Data/2024T20_WorldCup_Venues.csv",
                "format": {"type": "csv"}
            },

            "transform": [
                {
                    "calculate": "innings_select == 'Average First Innings' ? datum['Average First Innings'] : datum['Average Second Innings']",
                    "as": "Selected_Score"
                }
            ],

            "params": [
              {
                "name": "venue_selection",
                "select": {"type": "point", "fields": ["Venue Stadium"]},
                "bind": "legend"
              }
            ],

            "mark": {
                "type": "circle",
                "tooltip": true,
                "stroke": "white",
                "strokeWidth": 3
            },

            "encoding": {
                "longitude": {"field": "Longitude", "type": "quantitative"},
                "latitude": {"field": "Latitiude ", "type": "quantitative"},

                "size": {
                    "field": "Selected_Score",
                    "type": "quantitative",
                    "scale": {"range": [300, 2500]},
                    "legend": {"title": "Average Score"}
                },

                "color": {
                    "field": "Venue Stadium",
                    "type": "nominal",
                    "scale": {"scheme": "tableau10"},
                    "legend": {"title": "Venue Stadium"}
                },

                "opacity": {
                  "condition": {"param": "venue_selection", "value": 0.9},
                  "value": 0.2
                },

                "tooltip": [
                    {"field": "Venue Stadium", "type": "nominal", "title": "Stadium"},
                    {"field": "Venue City", "type": "nominal", "title": "City"},
                    {"field": "Average First Innings", "type": "quantitative", "title": "Average 1st Innings"},
                    {"field": "Average Second Innings", "type": "quantitative", "title": "Average 2nd Innings"}
                ]

            }
        }
    ]
}